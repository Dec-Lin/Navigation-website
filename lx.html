<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>导航网站</title>
    <link rel="stylesheet" href="./style.css">
    <script>
        window.onload = function () {
            //初始化
            var keys = {
                '0': { 0: 'q', 1: 'w', 2: 'e', 3: 'r', 4: 't', 5: 'y', 6: 'u', 7: 'i', 8: 'o', 9: 'p', length: 10 },
                '1': { 0: 'a', 1: 's', 2: 'd', 3: 'f', 4: 'g', 5: 'h', 6: 'j', 7: 'k', 8: 'l', length: 9 },
                '2': { 0: 'z', 1: 'x', 2: 'c', 3: 'v', 4: 'b', 5: 'n', 6: 'm', length: 7 },
                length: 3
            }
            var hash = {
                'q': 'qq.com',
                'w': 'weibo.com',
                'e': 'ele.me',
                't': 'taobao.com',
                'z': 'zhihu.com',
                'm': 'meituan.com'
            }
            var hashInLocalStorage = JSON.parse(localStorage.getItem('zzz') || 'null');
            if (hashInLocalStorage) {
                hash = hashInLocalStorage
            }
            //生成键盘
            var index = 0;
            while (index < keys['length']) {
                var oDiv = document.createElement('div');
                xxx.appendChild(oDiv);
                var row = keys[index];
                var index2 = 0;
                while (index2 < row['length']) {
                    var oKbd = document.createElement('kbd');

                    var oSpan = document.createElement('span');
                    oSpan.textContent = row[index2];

                    var oImg = document.createElement('img');
                    if (hash[row[index2]]) {
                        oImg.src = 'http://' + hash[row[index2]] + '/favicon.ico';
                    } else {
                        oImg.src = '//i.loli.net/2017/11/10/5a05afbc5e183.png';
                    }
                    oImg.onerror = function (xxxxx) {
                        xxxxx.target.src = '//i.loli.net/2017/11/10/5a05afbc5e183.png'
                    }


                    var oBtn = document.createElement('button');
                    oBtn.textContent = '编辑';
                    oBtn.id = row[index2];
                    oBtn.onclick = function (xxxxx) {
                        var key = xxxxx['target']['id'];
                        var x = prompt('输入一个网址');
                        hash[key] = x;
                        localStorage.setItem('zzz', JSON.stringify(hash))
                    }
                    oKbd.appendChild(oImg);
                    oKbd.appendChild(oSpan);
                    oKbd.appendChild(oBtn);
                    oDiv.appendChild(oKbd);
                    index2 = index2 + 1;
                }
                index = index + 1;
            }
            //监听键盘
            document.onkeypress = function (xxxxx) {
                var key = xxxxx['key'];
                var website = hash[key]
                window.open('http://' + website, '_blank')
            }
        }
    </script>
</head>

<body>
    <main>
        <div class="wrap" id="xxx"></div>
    </main>
</body>

</html>